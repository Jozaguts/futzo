import{dg as K,j as Q,r as a,c as P,k as i,cY as V}from"./016mahUR.js";import{u as y}from"./Bd6NytqX.js";const L=l=>{const o=new FormData,p=(u,s)=>{for(const e in s)if(s[e]instanceof File)o.append(`${u}[${e}]`,s[e]);else if(s[e]instanceof Date){const d=s[e].toISOString().split("T")[0];o.append(`${u}[${e}]`,d)}else K(s[e])?o.append(`${u}[${e}]`,JSON.stringify(s[e])):o.append(`${u}[${e}]`,s[e])};for(const u in l.value){const s=l.value[u];p(u,s)}return o},aa=Q("tournamentStore",()=>{const l=a({}),o=a([]),p=P(()=>!o.value.length),u=a(""),s=a(!1),e=a({}),d=a({}),h=a({current:"basic-info",steps:[{step:"basic-info",completed:!1,label:"Crea un torneo"},{step:"details-info",completed:!1,label:"Detalles del torneo"}]}),E=a([{id:1,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:null,schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:2,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:3,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:4,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:5,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:6,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:7,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:8,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:9,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:10,away:{name:"Cruz azul",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Santos",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}}]),U=a([{id:1,away:{name:"Chivas",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Monterrey",img:"https://ui-avatars.com/api/?name=Santos"},result:null,schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:2,away:{name:"Pachuca",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"Tigres",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:3,away:{name:"Santos",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"America",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:4,away:{name:"Santos",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"America",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:5,away:{name:"Santos",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"America",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}},{id:6,away:{name:"Santos",img:"https://ui-avatars.com/api/?name=Cruz azul"},home:{name:"America",img:"https://ui-avatars.com/api/?name=Santos"},result:"1-0",schedule:{day:"Sab. 9/3",hour:"19:00"}}]),k=a([]),A=a(0),D=a(0),F=a(0),O=a(0),v=a(!1),R=a(),g=a(!1),z=a(!1),q=a(!1),r=a(),B=a({}),m=a({currentPage:1,perPage:10,lastPage:1,total:0,sort:"asc"}),G=P(()=>o.value.filter(t=>t.status==="creado")),f=a([]),C=a(),I=a([]),N=a(!1);function b(){e.value={},h.value.current="basic-info",h.value.steps.map(t=>t.completed=!1),z.value=!1,r.value=void 0}async function _(t){const n=i(),{data:c}=await n(`api/v1/admin/tournaments/${t}/fields`);return c}async function S(){v.value=!0,await i()(`/api/v1/admin/tournaments?per_page=${m.value.perPage}&page=${m.value.currentPage}`).then(({data:n,pagination:c})=>{o.value=n||[],m.value={...m.value,...c}}).finally(()=>v.value=!1)}async function j(){const t=L(e);return await i()("api/v1/admin/tournaments",{method:"POST",body:t}).then(async n=>(await S(),y().toast("success","Torneo Creado","El nuevo torneo se ha creado exitosamente."),g.value=!1,b(),n)).catch(()=>{y().toast("error","Error al Crear Torneo","No se pudo crear el torneo. Por favor, intenta nuevamente.")})}async function x(){const t=L(e);return await i()(`api/v1/admin/tournaments/${r}`,{method:"PUT",body:t}).then(async n=>n).catch(n=>{console.log({error:n})})}async function H(t){var T,$;const n=i(),c=V();t||(t=($=(T=c.value)==null?void 0:T.league)==null?void 0:$.id);const{data:Y}=await n(`api/v1/admin/leagues/${t}/tournaments`);o.value=Y||[]}async function J(t){await i()(`api/v1/admin/tournaments/${r.value}/status`,{method:"PUT",body:{status:t}}).then(async()=>{await S()})}async function M(){return await i()(`api/v1/admin/tournaments/${r.value}/mark-as-completed`,{method:"PUT",body:{tournament_id:r.value}})}const w=async()=>{i()(`/api/v1/admin/tournaments/${r.value}/locations`).then(n=>{f.value=n})};return{tournaments:o,tournament:l,nextGames:E,categories:k,currentGames:U,teamsCount:A,roundsCount:D,matchesCount:F,matchesByRound:O,loading:v,tournamentTypes:R,dialog:g,isEdition:z,tournamentId:r,tournamentToEdit:B,pagination:m,markAsCompleted:M,noTournaments:p,search:u,steps:h,tournamentStoreRequest:e,calendarDialog:s,calendarStoreRequest:d,isCalendarEdition:q,tournamentLocations:f,tournamentLocationStoreRequest:C,selectedLocations:I,selectedLocationsHasError:N,tournamentsInCreatedState:G,getTournamentLocations:w,loadTournaments:S,storeTournament:j,fetchTournamentsByLeagueId:H,$reset:b,updateTournament:x,storeTournamentLocation:async()=>{await i()(`/api/v1/admin/tournaments/${r.value}/locations`,{method:"POST",body:C.value}).then(async()=>{y().toast("success","Ubicación del torneo","La Ubicación del torneo ha sido agregada correctamente."),await w()})},updateTournamentStatus:J,tournamentFields:_}});export{L as p,aa as u};
