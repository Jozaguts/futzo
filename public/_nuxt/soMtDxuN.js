import{_ as ye,a as _e}from"./C_E0yuJW.js";import{p as E,g as O,b as se,c as m,d as oe,e as H,f as s,F as J,r as z,w as re,n as xe,h as Ve,i,m as $e,j as we,k as ee,l as T,s as K,o as B,q as x,a as g,t as ie,v as c,x as R,y as ue,z as de,A as Z,B as w,V as Se,C as De,D as Ne,E as Pe,G as ke,H as Ce,I as Be,J as Te}from"./016mahUR.js";import{u as Ie}from"./Bd6NytqX.js";import{V as Me,a as Le}from"./1LfewGwV.js";import{V as Q}from"./BuMHRPYM.js";import ce from"./DK4Md9xt.js";import{V as me}from"./CBMwLEAi.js";import{V as F,a as P}from"./CBD4vqXw.js";import{g as ze,_ as qe}from"./BL2zCvW3.js";import{u as U}from"./fyzjdP1i.js";import{V as he}from"./BcbdIiL8.js";import"./RaWWsbWd.js";import"./C7GJWzQm.js";/* empty css        */import"./CjiuzNbr.js";import"./Dd3NSMhe.js";import"./oc_cjQCQ.js";const ge=E({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),fe=E({autoLineWidth:Boolean,...ge()},"VBarline"),te=O()({name:"VBarline",props:fe(),setup(e,n){let{slots:t}=n;const d=se(),l=m(()=>e.id||`barline-${d}`),o=m(()=>Number(e.autoDrawDuration)||500),u=m(()=>!!(e.showLabels||e.labels.length>0||t!=null&&t.label)),h=m(()=>parseFloat(e.lineWidth)||4),y=m(()=>Math.max(e.modelValue.length*h.value,Number(e.width))),V=m(()=>({minX:0,maxX:y.value,minY:0,maxY:parseInt(e.height,10)})),$=m(()=>e.modelValue.map(a=>oe(a,e.itemValue,a)));function S(a,r){const{minX:f,maxX:v,minY:b,maxY:_}=r,X=a.length;let M=e.max!=null?Number(e.max):Math.max(...a),C=e.min!=null?Number(e.min):Math.min(...a);C>0&&e.min==null&&(C=0),M<0&&e.max==null&&(M=0);const W=v/X,Y=(_-b)/(M-C||1),G=_-Math.abs(C*Y);return a.map((L,be)=>{const A=Math.abs(Y*L);return{x:f+be*W,y:G-A+ +(L<0)*A,height:A,value:L}})}const I=m(()=>{const a=[],r=S($.value,V.value),f=r.length;for(let v=0;a.length<f;v++){const b=r[v];let _=e.labels[v];_||(_=typeof b=="object"?b.value:b),a.push({x:b.x,value:String(_)})}return a}),D=m(()=>S($.value,V.value)),k=m(()=>(Math.abs(D.value[0].x-D.value[1].x)-h.value)/2),N=m(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));H(()=>{const a=e.gradient.slice().length?e.gradient.slice().reverse():[""];return s("svg",{display:"block"},[s("defs",null,[s("linearGradient",{id:l.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[a.map((r,f)=>s("stop",{offset:f/Math.max(a.length-1,1),"stop-color":r||"currentColor"},null))])]),s("clipPath",{id:`${l.value}-clip`},[D.value.map(r=>s("rect",{x:r.x+k.value,y:r.y,width:h.value,height:r.height,rx:N.value,ry:N.value},[e.autoDraw&&s(J,null,[s("animate",{attributeName:"y",from:r.y+r.height,to:r.y,dur:`${o.value}ms`,fill:"freeze"},null),s("animate",{attributeName:"height",from:"0",to:r.height,dur:`${o.value}ms`,fill:"freeze"},null)])]))]),u.value&&s("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[I.value.map((r,f)=>{var v;return s("text",{x:r.x+k.value+h.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((v=t.label)==null?void 0:v.call(t,{index:f,value:r.value}))??r.value])})]),s("g",{"clip-path":`url(#${l.value}-clip)`,fill:`url(#${l.value})`},[s("rect",{x:0,y:0,width:Math.max(e.modelValue.length*h.value,Number(e.width)),height:e.height},null)])])})}});function Re(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const l=e.shift(),o=e[e.length-1];return(t?`M${l.x} ${d-l.x+2} L${l.x} ${l.y}`:`M${l.x} ${l.y}`)+e.map((u,h)=>{const y=e[h+1],V=e[h-1]||l,$=y&&Ye(y,u,V);if(!y||$)return`L${u.x} ${u.y}`;const S=Math.min(ae(V,u),ae(y,u)),D=S/2<n?S/2:n,k=ne(V,u,D),N=ne(y,u,D);return`L${k.x} ${k.y}S${u.x} ${u.y} ${N.x} ${N.y}`}).join("")+(t?`L${o.x} ${d-l.x+2} Z`:"")}function j(e){return parseInt(e,10)}function Ye(e,n,t){return j(e.x+t.x)===j(2*n.x)&&j(e.y+t.y)===j(2*n.y)}function ae(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function ne(e,n,t){const d={x:e.x-n.x,y:e.y-n.y},l=Math.sqrt(d.x*d.x+d.y*d.y),o={x:d.x/l,y:d.y/l};return{x:n.x+o.x*t,y:n.y+o.y*t}}const ve=E({fill:Boolean,...ge()},"VTrendline"),le=O()({name:"VTrendline",props:ve(),setup(e,n){let{slots:t}=n;const d=se(),l=m(()=>e.id||`trendline-${d}`),o=m(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),u=z(0),h=z(null);function y(a,r){const{minX:f,maxX:v,minY:b,maxY:_}=r,X=a.length,M=e.max!=null?Number(e.max):Math.max(...a),C=e.min!=null?Number(e.min):Math.min(...a),W=(v-f)/(X-1),Y=(_-b)/(M-C||1);return a.map((G,L)=>({x:f+L*W,y:_-(G-C)*Y,value:G}))}const V=m(()=>!!(e.showLabels||e.labels.length>0||t!=null&&t.label)),$=m(()=>parseFloat(e.lineWidth)||4),S=m(()=>Number(e.width)),I=m(()=>{const a=Number(e.padding);return{minX:a,maxX:S.value-a,minY:a,maxY:parseInt(e.height,10)-a}}),D=m(()=>e.modelValue.map(a=>oe(a,e.itemValue,a))),k=m(()=>{const a=[],r=y(D.value,I.value),f=r.length;for(let v=0;a.length<f;v++){const b=r[v];let _=e.labels[v];_||(_=typeof b=="object"?b.value:b),a.push({x:b.x,value:String(_)})}return a});re(()=>e.modelValue,async()=>{if(await xe(),!e.autoDraw||!h.value)return;const a=h.value,r=a.getTotalLength();e.fill?(a.style.transformOrigin="bottom center",a.style.transition="none",a.style.transform="scaleY(0)",a.getBoundingClientRect(),a.style.transition=`transform ${o.value}ms ${e.autoDrawEasing}`,a.style.transform="scaleY(1)"):(a.style.strokeDasharray=`${r}`,a.style.strokeDashoffset=`${r}`,a.getBoundingClientRect(),a.style.transition=`stroke-dashoffset ${o.value}ms ${e.autoDrawEasing}`,a.style.strokeDashoffset="0"),u.value=r},{immediate:!0});function N(a){const r=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return Re(y(D.value,I.value),r,a,parseInt(e.height,10))}H(()=>{var r;const a=e.gradient.slice().length?e.gradient.slice().reverse():[""];return s("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[s("defs",null,[s("linearGradient",{id:l.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[a.map((f,v)=>s("stop",{offset:v/Math.max(a.length-1,1),"stop-color":f||"currentColor"},null))])]),V.value&&s("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[k.value.map((f,v)=>{var b;return s("text",{x:f.x+$.value/2+$.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((b=t.label)==null?void 0:b.call(t,{index:v,value:f.value}))??f.value])})]),s("path",{ref:h,d:N(e.fill),fill:e.fill?`url(#${l.value})`:"none",stroke:e.fill?"none":`url(#${l.value})`},null),e.fill&&s("path",{d:N(!1),fill:"none",stroke:e.color??((r=e.gradient)==null?void 0:r[0])},null)])})}}),Ge=E({type:{type:String,default:"trend"},...fe(),...ve()},"VSparkline"),je=O()({name:"VSparkline",props:Ge(),setup(e,n){let{slots:t}=n;const{textColorClasses:d,textColorStyles:l}=Ve(()=>e.color),o=m(()=>!!(e.showLabels||e.labels.length>0||t!=null&&t.label)),u=m(()=>{let h=parseInt(e.height,10);return o.value&&(h+=parseInt(e.labelSize,10)*1.5),h});H(()=>{const h=e.type==="trend"?le:te,y=e.type==="trend"?le.filterProps(e):te.filterProps(e);return i(h,$e({key:e.type,class:d.value,style:l.value,viewBox:`0 0 ${e.width} ${parseInt(u.value,10)}`},y),t)})}}),q=we("dashboardStore",()=>{const e=z("lastMonth"),n=z({registeredTeams:{total:0,current:0,dailyData:[],label:"vs último mes"},activePlayers:{total:0,current:0,dailyData:[],label:"vs último mes"},completedGames:{total:0,current:0,dailyData:[],label:"vs último mes"}}),t=z([]);function d(){ee()(`/api/v1/admin/dashboard/stats?range=${e.value}`).then(u=>{n.value.registeredTeams=u.registeredTeams,n.value.activePlayers=u.activePlayers,n.value.completedGames=u.completedGames})}function l(){ee()("/api/v1/admin/dashboard/next-games").then(({data:u})=>{t.value=u})}return{teamStats:n,range:e,nextGames:t,byRange:d,getNextGames:l}}),Fe=T({__name:"app-bar-btn",setup(e){const{range:n}=K(q()),t=[{value:"lastYear",name:"12 meses"},{value:"lastMonth",name:"30 días"},{value:"lastWeek",name:"7 días"},{value:"last24Hrs",name:"24 horas"}];return re(n,(d,l)=>{d!==l&&q().byRange()}),(d,l)=>(x(),B(Me,{mandatory:"",modelValue:g(n),"onUpdate:modelValue":l[0]||(l[0]=o=>ie(n)?n.value=o:null),class:"mr-8"},{default:c(()=>[(x(),R(J,null,ue(t,o=>i(Le,{key:o.value,value:o.value},{default:c(({isSelected:u,toggle:h})=>[i(Q,{onClick:h,rounded:"0",color:u?"primary":"",class:de(["dashboard-app-bar-btn dashboard-app-bar-btn-"+o.value])},{default:c(()=>[Z(w(o.name),1)]),_:2},1032,["onClick","color","class"])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]))}}),Ee={class:"dashboard-stats-card--values-container__percentage text"},Xe=T({__name:"card-arrow",props:{value:{type:Number,required:!0},label:{type:String,required:!0}},setup(e){const n=e,t=m(()=>Number(n.value)<=0);return(d,l)=>{const o=ce;return x(),R("div",null,[i(o,{class:"arrow-card",name:g(t)?"futzo-icon:arrow-down":"futzo-icon:arrow-up"},null,8,["name"]),s("span",{class:de(["dashboard-stats-card--values-container__percentage",g(t)?"negative":"positive"])},w(e.value),3),s("span",Ee,w(e.label),1)])}}}),We=T({__name:"stats",props:{values:{type:Array,required:!0},isPositive:{type:Boolean,required:!0}},setup(e){const n=[["rgba(7,148,85,0.1)","rgba(7,148,85,0.07)"],["rgba(240,68,56,0.1)","rgba(240,68,56,0.07)"]],t=e,d=m(()=>t.isPositive?n[0]:n[1]),l=m(()=>t.isPositive?"#079455":"#F04438"),o=m(()=>(t.isPositive,t.values));return(u,h)=>(x(),B(je,{fill:!0,width:"130",color:g(l),height:"70",gradient:g(d),"line-width":1,"model-value":g(o),padding:1,smooth:!1,"gradient-direction":"bottom","auto-draw":""},null,8,["color","gradient","model-value"]))}}),Ae={class:"dashboard-stats-card--values-container"},Ue={class:"dashboard-stats-card--values-container__total"},p=T({__name:"stats-card",props:{title:{required:!0,type:String},values:{required:!0,type:Object},isPositive:{required:!0,type:Boolean,default:()=>!0}},setup(e){return(n,t)=>(x(),B(Se,{class:"dashboard-stats-card"},{default:c(()=>[i(De,{class:"dashboard-stats-card__title"},{default:c(()=>[Z(w(e.title),1)]),_:1}),i(Ne,null,{default:c(()=>[i(me,{class:"pa-0"},{default:c(()=>[i(F,{"no-gutters":""},{default:c(()=>[i(P,{cols:"7",class:"position-relative"},{default:c(()=>[s("div",Ae,[s("p",Ue,w(e.values.total),1),i(Xe,{value:e.values.current,label:e.values.label},null,8,["value","label"])])]),_:1}),i(P,{cols:"5"},{default:c(()=>[i(We,{isPositive:e.isPositive,values:e.values.dailyData},null,8,["isPositive","values"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),pe=T({__name:"last-teams",async setup(e){let n,t;const d=ze("teams");[n,t]=Pe(()=>U().getTeams()),await n,t();const{teams:l,search:o,pagination:u}=K(U());return(h,y)=>{var $;const V=qe;return($=g(l))!=null&&$.length?(x(),B(V,{key:0,headers:g(d),"show-index":!0,items:g(l),itemKey:"name",search:g(o),pagination:g(u),"onUpdate:pagination":y[0]||(y[0]=S=>ie(u)?u.value=S:null),paginate:g(U)().getTeams,"custom-name":!0,"show-footer":!1},null,8,["headers","items","search","pagination","paginate"])):(x(),B(he,{key:1,image:"/no-data.svg",size:"100",text:"No hay equipos",title:"Últimos equipos inscritos"}))}}}),Oe={class:"dashboard-game-container"},He={class:"dashboard-teams"},Je={class:"dashboard-team-local"},Ke=["src"],Ze={class:"dashboard-team_name"},Qe={class:"dashboard-team-away"},et=["src"],tt={class:"dashboard-team_name"},at={class:"dashboard-data"},nt={class:"dashboard-date"},lt={class:"dashboard-hour"},st={class:"dashboard-field"},ot={class:"dashboard-btn-container"},rt=T({__name:"dashboard-next-games",props:{game:{type:Object,required:!0}},setup(e){return(n,t)=>{const d=ce;return x(),R("div",Oe,[s("div",He,[s("div",Je,[s("img",{src:e.game.home_team.image,alt:"team logo",class:"dashboard-logo"},null,8,Ke),s("span",Ze,w(e.game.home_team.name),1)]),t[0]||(t[0]=s("div",{class:"dashboard-vs-container"},[s("div",{class:"dashboard-vs"},"vs")],-1)),s("div",Qe,[s("img",{src:e.game.away_team.image,alt:"team logo",class:"dashboard-logo"},null,8,et),s("span",tt,w(e.game.away_team.name),1)])]),s("div",at,[s("span",nt,w(e.game.match_date),1),s("span",lt,w(e.game.match_time),1),s("span",st,w(e.game.location.name),1)]),s("div",ot,[i(Q,{variant:"text",ripple:!1,to:"/torneos"},{append:c(()=>[i(d,{name:"futzo-icon:arrow-right"})]),default:c(()=>[t[1]||(t[1]=s("span",{class:"dashboard-btn-text"}," Ver detalles",-1))]),_:1,__:[1]})])])}}}),it={class:"dashboard subtitle-container"},ut={key:0,class:"text-center"},Pt=T({__name:"index",setup(e){const{teamStats:n,nextGames:t}=K(q());return ke(()=>{var o;const d=Ce(),l=Be();((o=d.query)==null?void 0:o.code)==="USER_NOT_VERIFIED"&&(Ie().toast("error","Correo No Verificado","Tu correo electrónico no ha sido verificado. Por favor, revisa tu bandeja de entrada."),l.replace("/"))}),Te(()=>{q().byRange(),q().getNextGames()}),(d,l)=>{const o=_e;return x(),B(o,null,{"app-bar":c(()=>[i(ye,null,{buttons:c(()=>[i(Fe)]),_:1})]),default:c(()=>[i(me,{fluid:"",class:"pa-0 mx-0"},{default:c(()=>[i(F,null,{default:c(()=>[i(P,null,{default:c(()=>[i(p,{title:"Equipos totales",values:g(n).registeredTeams,isPositive:g(n).registeredTeams.current>0},null,8,["values","isPositive"])]),_:1}),i(P,null,{default:c(()=>[i(p,{title:"jugadores activos",values:g(n).activePlayers,isPositive:g(n).activePlayers.current>0},null,8,["values","isPositive"])]),_:1}),i(P,null,{default:c(()=>[i(p,{title:"juegos finalizados",values:g(n).completedGames,isPositive:g(n).completedGames.current>0},null,8,["values","isPositive"])]),_:1})]),_:1}),i(F,null,{default:c(()=>[i(P,{cols:"12"},{default:c(()=>l[0]||(l[0]=[s("h2",{class:"dashboard subtitle"},"Últimos equipos inscritos",-1)])),_:1,__:[0]}),i(P,{cols:"12"},{default:c(()=>[i(pe)]),_:1})]),_:1}),i(F,null,{default:c(()=>[i(P,{cols:"12"},{default:c(()=>[s("div",it,[l[2]||(l[2]=s("h2",{class:"dashboard subtitle"},"Próximos juegos",-1)),i(Q,{variant:"text",to:"/torneos"},{default:c(()=>l[1]||(l[1]=[Z("Ver todos")])),_:1,__:[1]})]),g(t).length===0?(x(),R("div",ut,[i(he,{image:"/no-data.svg",size:"100",text:"No hay juegos programados",title:"Próximos juegos"})])):(x(!0),R(J,{key:1},ue(g(t),u=>(x(),B(rt,{key:u.id,game:u},null,8,["game"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Pt as default};
