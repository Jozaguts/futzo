import{t as R,i as S,a as w,w as I,b as W}from"./7jg-uhs3.js";import{c as k,c4 as b,w as U,bc as O,J as Z,c6 as j,a as z}from"./016mahUR.js";const C=S?window:void 0;function _(t){var l;const a=b(t);return(l=a==null?void 0:a.$el)!=null?l:a}function D(...t){const l=[],a=()=>{l.forEach(r=>r()),l.length=0},h=(r,n,o,i)=>(r.addEventListener(n,o,i),()=>r.removeEventListener(n,o,i)),u=k(()=>{const r=w(b(t[0])).filter(n=>n!=null);return r.every(n=>typeof n!="string")?r:void 0}),c=I(()=>{var r,n;return[(n=(r=u.value)==null?void 0:r.map(o=>_(o)))!=null?n:[C].filter(o=>o!=null),w(b(u.value?t[1]:t[0])),w(z(u.value?t[2]:t[1])),b(u.value?t[3]:t[2])]},([r,n,o,i])=>{if(a(),!(r!=null&&r.length)||!(n!=null&&n.length)||!(o!=null&&o.length))return;const p=W(i)?{...i}:i;l.push(...r.flatMap(m=>n.flatMap(g=>o.map(E=>h(m,g,E,p)))))},{flush:"post"}),d=()=>{c(),a()};return R(a),d}function x(){const t=O(!1),l=j();return l&&Z(()=>{t.value=!0},l),t}function B(t){const l=x();return k(()=>(l.value,!!t()))}function $(t,l={}){var a,h;const u=O(!1),c=O(null);let d=0,r=!0;if(S){const n=typeof l=="function"?{onDrop:l}:l,o=(a=n.multiple)!=null?a:!0,i=(h=n.preventDefaultForUnhandled)!=null?h:!1,p=e=>{var s,v;const f=Array.from((v=(s=e.dataTransfer)==null?void 0:s.files)!=null?v:[]);return f.length===0?null:o?f:[f[0]]},m=e=>{const s=z(n.dataTypes);return typeof s=="function"?s(e):s!=null&&s.length?e.length===0?!1:e.every(v=>s.some(f=>v.includes(f))):!0},g=e=>{const s=Array.from(e??[]).map(T=>T.type),v=m(s),f=o||e.length<=1;return v&&f},E=()=>/^(?:(?!chrome|android).)*safari/i.test(navigator.userAgent)&&!("chrome"in window),y=(e,s)=>{var v,f,T,A,M,F;const L=(v=e.dataTransfer)==null?void 0:v.items;if(r=(f=L&&g(L))!=null?f:!1,i&&e.preventDefault(),!E()&&!r){e.dataTransfer&&(e.dataTransfer.dropEffect="none");return}e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy");const V=p(e);switch(s){case"enter":d+=1,u.value=!0,(T=n.onEnter)==null||T.call(n,null,e);break;case"over":(A=n.onOver)==null||A.call(n,null,e);break;case"leave":d-=1,d===0&&(u.value=!1),(M=n.onLeave)==null||M.call(n,null,e);break;case"drop":d=0,u.value=!1,r&&(c.value=V,(F=n.onDrop)==null||F.call(n,V,e));break}};D(t,"dragenter",e=>y(e,"enter")),D(t,"dragover",e=>y(e,"over")),D(t,"dragleave",e=>y(e,"leave")),D(t,"drop",e=>y(e,"drop"))}return{files:c,isOverDropZone:u}}function q(t,l,a={}){const{window:h=C,...u}=a;let c;const d=B(()=>h&&"ResizeObserver"in h),r=()=>{c&&(c.disconnect(),c=void 0)},n=k(()=>{const p=b(t);return Array.isArray(p)?p.map(m=>_(m)):[_(p)]}),o=U(n,p=>{if(r(),d.value&&h){c=new ResizeObserver(l);for(const m of p)m&&c.observe(m,u)}},{immediate:!0,flush:"post"}),i=()=>{r(),o()};return R(i),{isSupported:d,stop:i}}export{q as a,$ as u};
