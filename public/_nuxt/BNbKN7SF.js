import{g as $,p as B,r as D,bc as I,c as E,aM as H,J as W,M as J,ap as O,e as F,i as l,av as U,z as j,S as G,aA as K,ca as Q,cb as X,w as Y,f,A as Z,n as C}from"./016mahUR.js";import{a as P,V as p}from"./BuMHRPYM.js";const ee=B({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...K(),...G()},"VInfiniteScroll"),q=Q({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,u)=>!0},setup(e,u){let{emit:n}=u;const{intersectionRef:m,isIntersecting:r}=X();return Y(r,async c=>{n("intersect",e.side,c)}),F(()=>f("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:m},[Z("Â ")])),{}}}),ie=$()({name:"VInfiniteScroll",props:ee(),emits:{load:e=>!0},setup(e,u){let{slots:n,emit:m}=u;const r=D(),c=I("ok"),v=I("ok"),h=E(()=>H(e.margin)),g=I(!1);function S(t){if(!r.value)return;const i=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[i]=t}function N(){if(!r.value)return 0;const t=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[t]}function d(){if(!r.value)return 0;const t=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[t]}function _(){if(!r.value)return 0;const t=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[t]}W(()=>{r.value&&(e.side==="start"?S(d()):e.side==="both"&&S(d()/2-_()/2))});function V(t,i){t==="start"?c.value=i:t==="end"&&(v.value=i)}function L(t){return t==="start"?c.value:v.value}let k=0;function M(t,i){g.value=i,g.value&&y(t)}function y(t){if(e.mode!=="manual"&&!g.value)return;const i=L(t);if(!r.value||["empty","loading"].includes(i))return;k=d(),V(t,"loading");function a(o){V(t,o),C(()=>{o==="empty"||o==="error"||(o==="ok"&&t==="start"&&S(d()-k+N()),e.mode!=="manual"&&C(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{y(t)})})})}))})}m("load",{side:t,done:a})}const{t:T}=J();function b(t,i){var s,w,x,z,A;if(e.side!==t&&e.side!=="both")return;const a=()=>y(t),o={side:t,props:{onClick:a,color:e.color}};return i==="error"?(s=n.error)==null?void 0:s.call(n,o):i==="empty"?((w=n.empty)==null?void 0:w.call(n,o))??f("div",null,[T(e.emptyText)]):e.mode==="manual"?i==="loading"?((x=n.loading)==null?void 0:x.call(n,o))??l(P,{indeterminate:!0,color:e.color},null):((z=n["load-more"])==null?void 0:z.call(n,o))??l(p,{variant:"outlined",color:e.color,onClick:a},{default:()=>[T(e.loadMoreText)]}):((A=n.loading)==null?void 0:A.call(n,o))??l(P,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:R}=O(e);F(()=>{const t=e.tag,i=e.side==="start"||e.side==="both",a=e.side==="end"||e.side==="both",o=e.mode==="intersect";return l(t,{ref:r,class:j(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":i,"v-infinite-scroll--end":a}]),style:U(R.value)},{default:()=>{var s;return[f("div",{class:"v-infinite-scroll__side"},[b("start",c.value)]),i&&o&&l(q,{key:"start",side:"start",onIntersect:M,rootMargin:h.value},null),(s=n.default)==null?void 0:s.call(n),a&&o&&l(q,{key:"end",side:"end",onIntersect:M,rootMargin:h.value},null),f("div",{class:"v-infinite-scroll__side"},[b("end",v.value)])]}})})}});export{ie as V};
