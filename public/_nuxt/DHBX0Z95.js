import{u}from"./7jg-uhs3.js";let l=null;const w=async()=>{if(!l){const{AutocompleteSessionToken:i}=await google.maps.importLibrary("places");l=new i}return l},P=()=>({search:u(async a=>{var r,s,n;try{const{AutocompleteSuggestion:o}=await google.maps.importLibrary("places"),e=await w(),{suggestions:p}=await o.fetchAutocompleteSuggestions({input:a,sessionToken:e,language:"es",region:"mx"});return p.map(t=>{var c,g,m,d;return{description:t.placePrediction.text.text||"",matched_substrings:[],place_id:((c=t.placePrediction)==null?void 0:c.placeId)||"",reference:((g=t.placePrediction)==null?void 0:g.placeId)||"",structured_formatting:{main_text:t.placePrediction.mainText.text||"",secondary_text:((m=t.placePrediction.secondaryText)==null?void 0:m.text)||"",main_text_matched_substrings:t.placePrediction.mainText.matches},terms:[],types:((d=t.placePrediction)==null?void 0:d.types)||[]}})}catch(o){return console.warn("Fallo AutocompleteSuggestion, usando fallback:",o),(n=(s=(r=window.google)==null?void 0:r.maps)==null?void 0:s.places)!=null&&n.AutocompleteService?new Promise(e=>{new google.maps.places.AutocompleteService().getPlacePredictions({input:a},(t,c)=>{c!==google.maps.places.PlacesServiceStatus.OK||!t?(console.error("Error con AutocompleteService:",c),e([])):e(t)})}):[]}},400)}),f=async i=>{var a,r,s,n;if(!((r=(a=window.google)==null?void 0:a.maps)!=null&&r.importLibrary))return console.error("Google Maps API no est√° disponible."),null;try{const{Place:o}=await google.maps.importLibrary("places"),e=new o({id:i,requestedLanguage:"es"});return await e.fetchFields({fields:["displayName","formattedAddress","location"]}),{name:e.displayName,address:e.formattedAddress,lat:(s=e.location)==null?void 0:s.lat(),lng:(n=e.location)==null?void 0:n.lng()}}catch(o){return console.error("Error al obtener detalles del lugar:",o),null}};export{f as g,P as u};
