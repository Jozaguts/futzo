import fe from"./DK4Md9xt.js";import{g as ge,p as ye,r as k,bf as xe,ar as Se,aq as he,c as X,e as $e,bK as oe,i as e,m as U,bL as Te,az as we,f as C,b_ as Ce,F as pe,j as ke,b$ as Re,J as W,k as G,l as H,s as P,x as Fe,q as I,D as Pe,v as t,A as z,B as M,a,al as Ie,an as ve,w as Me,o as B,z as Ue,a$ as ne,a2 as se,ac as ue,ad as ie,t as _e,a3 as Be,aa as Le,ag as ze,a8 as re,av as Ee,V as qe}from"./016mahUR.js";import"./Bd6NytqX.js";import{u as F}from"./CxFJkEQW.js";import{V as Ae}from"./jgFPC-YH.js";import{_ as Ne}from"./T7PgQhTK.js";import{_ as Oe,V as De}from"./C0DxzrD2.js";import{_ as He}from"./ULYP_ZNe.js";import{u as je,_ as Xe}from"./DYHIjD_T.js";import{u as Ve}from"./BBOJC0Fp.js";import{u as Je,a as Ke,m as Ge,V as Qe,b as de,g as ce,_ as We}from"./xILKa3jR.js";import{M as Ye,a as Ze,F as ea}from"./0QfyqDfL.js";import{V as Y}from"./CBMwLEAi.js";import{V as Q}from"./oc_cjQCQ.js";import{V as L,a as w}from"./CBD4vqXw.js";import{V as aa}from"./BI8sSrZf.js";import{I as ta}from"./DRGxzRnG.js";import{V as me}from"./BuMHRPYM.js";import{V as la}from"./DM74y-lG.js";const oa=ye({...we(),...Te(),...Ge(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),na=ge()({name:"VRangeSlider",props:oa(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,end:n=>!0,start:n=>!0},setup(n,_){let{slots:l,emit:V}=_;const u=k(),r=k(),m=k(),{rtlClasses:$}=xe();function i(y){if(!u.value||!r.value)return;const x=ce(y,u.value.$el,n.direction),b=ce(y,r.value.$el,n.direction),v=Math.abs(x),h=Math.abs(b);return v<h||v===h&&x<0?u.value.$el:r.value.$el}const R=Je(n),s=Se(n,"modelValue",void 0,y=>y!=null&&y.length?y.map(x=>R.roundValue(x)):[0,0]),{activeThumbRef:p,hasLabels:g,max:o,min:c,mousePressed:f,onSliderMousedown:d,onSliderTouchstart:S,position:K,trackContainerRef:be,readonly:Z}=Ke({props:n,steps:R,onSliderStart:()=>{V("start",s.value)},onSliderEnd:y=>{var v;let{value:x}=y;const b=p.value===((v=u.value)==null?void 0:v.$el)?[x,s.value[1]]:[s.value[0],x];!n.strict&&b[0]<b[1]&&(s.value=b),V("end",s.value)},onSliderMove:y=>{var h,E,q,T;let{value:x}=y;const[b,v]=s.value;!n.strict&&b===v&&b!==c.value&&(p.value=x>b?(h=r.value)==null?void 0:h.$el:(E=u.value)==null?void 0:E.$el,(q=p.value)==null||q.focus()),p.value===((T=u.value)==null?void 0:T.$el)?s.value=[Math.min(x,v),v]:s.value=[b,Math.max(b,x)]},getActiveThumb:i}),{isFocused:j,focus:ee,blur:ae}=he(n),te=X(()=>K(s.value[0])),le=X(()=>K(s.value[1]));return $e(()=>{const y=oe.filterProps(n),x=!!(n.label||l.label||l.prepend);return e(oe,U({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!l["tick-label"]||g.value,"v-slider--focused":j.value,"v-slider--pressed":f.value,"v-slider--disabled":n.disabled},$.value,n.class],style:n.style,ref:m},y,{focused:j.value}),{...l,prepend:x?b=>{var v,h;return C(pe,null,[((v=l.label)==null?void 0:v.call(l,b))??(n.label?e(Ce,{class:"v-slider__label",text:n.label},null):void 0),(h=l.prepend)==null?void 0:h.call(l,b)])}:void 0,default:b=>{var E,q;let{id:v,messagesId:h}=b;return C("div",{class:"v-slider__container",onMousedown:Z.value?void 0:d,onTouchstartPassive:Z.value?void 0:S},[C("input",{id:`${v.value}_start`,name:n.name||v.value,disabled:!!n.disabled,readonly:!!n.readonly,tabindex:"-1",value:s.value[0]},null),C("input",{id:`${v.value}_stop`,name:n.name||v.value,disabled:!!n.disabled,readonly:!!n.readonly,tabindex:"-1",value:s.value[1]},null),e(Qe,{ref:be,start:te.value,stop:le.value},{"tick-label":l["tick-label"]}),e(de,{ref:u,"aria-describedby":h.value,focused:j&&p.value===((E=u.value)==null?void 0:E.$el),modelValue:s.value[0],"onUpdate:modelValue":T=>s.value=[T,s.value[1]],onFocus:T=>{var A,N,O,D;ee(),p.value=(A=u.value)==null?void 0:A.$el,o.value!==c.value&&s.value[0]===s.value[1]&&s.value[1]===c.value&&T.relatedTarget!==((N=r.value)==null?void 0:N.$el)&&((O=u.value)==null||O.$el.blur(),(D=r.value)==null||D.$el.focus())},onBlur:()=>{ae(),p.value=void 0},min:c.value,max:s.value[1],position:te.value,ripple:n.ripple},{"thumb-label":l["thumb-label"]}),e(de,{ref:r,"aria-describedby":h.value,focused:j&&p.value===((q=r.value)==null?void 0:q.$el),modelValue:s.value[1],"onUpdate:modelValue":T=>s.value=[s.value[0],T],onFocus:T=>{var A,N,O,D;ee(),p.value=(A=r.value)==null?void 0:A.$el,o.value!==c.value&&s.value[0]===s.value[1]&&s.value[0]===o.value&&T.relatedTarget!==((N=u.value)==null?void 0:N.$el)&&((O=r.value)==null||O.$el.blur(),(D=u.value)==null||D.$el.focus())},onBlur:()=>{ae(),p.value=void 0},min:s.value[0],max:o.value,position:le.value,ripple:n.ripple},{"thumb-label":l["thumb-label"]})])}})}),{}}}),J=ke("leaguesStore",()=>{const n=k([]),_=k([]),l=async()=>{const r=G();n.value=await r("/api/v1/admin/leagues")},V=async()=>{const r=G();_.value=await r("/api/v1/admin/leagues/football/types")},u=async()=>await G()("/api/v1/admin/leagues/locations");return Re(async()=>{await J().fetchLeagues(),await J().getFootballTypes()}),W(async()=>{await V()}),{leagues:n,getFootballTypes:V,fetchLeagues:l,footballTypes:_,getLeagueLocations:u}}),sa={class:""},ua=H({__name:"header",setup(n){const{dialog:_,isEdition:l}=P(F()),V=l.value?"Editar Torneo":"Crear un torneo",u=l.value?"Modifica los detalles del torneo.":"Completa los detalles del torneo.";return(r,m)=>{const $=fe;return I(),Fe(pe,null,[e(Pe,null,{prepend:t(()=>[e(Ae,{border:"primary thin",class:"mx-auto d-flex justify-center align-center mr-2 rounded-lg",height:"45",width:"45"},{default:t(()=>[e($,{name:"mdi-light:trophy"})]),_:1})]),title:t(()=>[C("span",sa,M(a(V)),1)]),subtitle:t(()=>[z(M(a(u)),1)]),append:t(()=>[e($,{name:"futzo-icon:x-dialog cursor-pointer",onClick:m[0]||(m[0]=i=>_.value=!1)})]),_:1}),e(Ie)],64)}}}),ia=H({__name:"01-basicInfo",setup(n,{expose:_}){const{footballTypes:l}=P(J()),{formats:V}=P(je()),{isEdition:u,tournamentStoreRequest:r}=P(F()),{handleSubmit:m,resetForm:$,fields:i,validate:R,setValues:s}=Ve(u.value?"edit-tournament-basic-info":"create-tournament-basic-info"),p=k();return W(()=>{var g;p.value=[Ye,Ze],(g=r.value)!=null&&g.basic&&(s({...r.value.basic}),r.value.basic.image&&(i.image=r.value.basic.image)),u.value||(i.football_type_id.fieldValue=ea)}),ve(()=>{$()}),Me(p,g=>{i.minMax.fieldValue=g}),_({validate:R,handleSubmit:m}),(g,o)=>{const c=Oe,f=He;return I(),B(Y,{class:"container"},{default:t(()=>[e(c,{modelValue:a(i).name,"onUpdate:modelValue":o[0]||(o[0]=d=>a(i).name=d),label:"Nombre del torneo*",placeholder:"p.ej. Torneo de verano"},null,8,["modelValue"]),e(c,{label:"Fecha de inicio*"},{input:t(()=>[e(f,{start_date:a(i).start_date.fieldValue,"onUpdate:start_date":o[1]||(o[1]=d=>a(i).start_date.fieldValue=d),end_date:a(i).end_date.fieldValue,"onUpdate:end_date":o[2]||(o[2]=d=>a(i).end_date.fieldValue=d),multiCalendar:a(u)},null,8,["start_date","end_date","multiCalendar"])]),_:1}),e(c,{label:"Imagen del torneo"},{input:t(()=>[e(Xe,{modelValue:a(i).image.fieldValue,"onUpdate:modelValue":o[3]||(o[3]=d=>a(i).image.fieldValue=d)},null,8,["modelValue"]),C("span",{class:Ue(["text-error text-caption",a(i).image.fieldPropsValue["error-messages"][0]?"ml-2":""])},M(a(i).image.fieldPropsValue["error-messages"][0]??""),3)]),_:1}),e(c,{label:"Formato*"},{input:t(()=>[e(ne,U({"no-data-text":"No hay formatos",items:a(V),density:"compact","item-title":"name","item-value":"id",placeholder:"Formato","menu-icon":"mdi-chevron-down",modelValue:a(i).tournament_format_id.fieldValue,"onUpdate:modelValue":o[4]||(o[4]=d=>a(i).tournament_format_id.fieldValue=d)},a(i).tournament_format_id.fieldPropsValue),{item:t(({props:d,item:S})=>[e(se,ue(ie(d)),{default:t(()=>[e(Q,{activator:"parent",location:"end","max-width":"300"},{default:t(()=>[z(M(S.raw.description),1)]),_:2},1024)]),_:2},1040)]),_:1},16,["items","modelValue"])]),_:1}),e(c,{label:"Tipo de torneo*"},{input:t(()=>[e(ne,U({"no-data-text":"No hay formatos",items:a(l),density:"compact","item-title":"name","item-value":"id",placeholder:"Tipo","menu-icon":"mdi-chevron-down",modelValue:a(i).football_type_id.fieldValue,"onUpdate:modelValue":o[5]||(o[5]=d=>a(i).football_type_id.fieldValue=d)},a(i).football_type_id.fieldPropsValue),{item:t(({props:d,item:S})=>[e(se,ue(ie(d)),{default:t(()=>[e(Q,{activator:"parent",location:"end","max-width":"300"},{default:t(()=>[z(M(S.raw.description),1)]),_:2},1024)]),_:2},1040)]),_:1},16,["items","modelValue"])]),_:1}),e(c,{label:"Categoría*"},{input:t(()=>[e(We,{disabled:!1,modelValue:a(i).category_id.fieldValue,"onUpdate:modelValue":o[6]||(o[6]=d=>a(i).category_id.fieldValue=d),errors:a(i).category_id.fieldPropsValue},null,8,["modelValue","errors"])]),_:1}),e(c,{label:"Equipos*",sublabel:"Mínimo y máximo"},{input:t(()=>[e(na,{step:"1",max:40,density:"comfortable","hide-spin-buttons":"",hint:"Selecciona la cantidad de equipos requeridos para iniciar el torneo y el límite de participantes permitidos.","persistent-hint":"",modelValue:a(p),"onUpdate:modelValue":o[7]||(o[7]=d=>_e(p)?p.value=d:null),strict:""},null,8,["modelValue"])]),_:1})]),_:1})}}}),ra=H({__name:"02-detailsInfo",setup(n,{expose:_}){const{isEdition:l,tournamentStoreRequest:V}=P(F()),{handleSubmit:u,resetForm:r,fields:m,validate:$,setValues:i}=Ve(l.value?"edit-tournament-details-info":"create-tournament-details-info");W(()=>{var g;(g=V.value)!=null&&g.details&&i({...V.value.details}),J().getLeagueLocations().then(o=>{s.value=o})}),ve(()=>{r()}),_({validate:$,handleSubmit:u});const R=k(""),s=k([]),p=g=>console.log(g);return(g,o)=>{const c=fe;return I(),B(Y,{class:"container"},{default:t(()=>[e(L,null,{default:t(()=>[e(w,{cols:"12",lg:"4",md:"4"},{default:t(()=>o[3]||(o[3]=[C("span",{class:"text-body-1"}," Ubicaciones* ",-1),C("small",{class:"d-block text-caption"}," Donde se llevaran acabo los partidos ",-1)])),_:1,__:[3]}),e(w,{cols:"12",lg:"8",md:"8"},{default:t(()=>[e(aa,U({multiple:"","item-value":"id","item-title":"name","item-props":f=>({title:f==null?void 0:f.name,subtitle:`Campos disponibles :${f==null?void 0:f.field_count}`}),search:a(R),items:a(s),modelValue:a(m).locationIds.fieldValue,"onUpdate:modelValue":o[0]||(o[0]=f=>a(m).locationIds.fieldValue=f)},a(m).locationIds.fieldPropsValue,{"onUpdate:search":p}),null,16,["item-props","search","items","modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(w,{cols:"12",lg:"4",md:"4"},{default:t(()=>o[4]||(o[4]=[C("span",{class:"text-body-1"}," Premio ",-1)])),_:1,__:[4]}),e(w,{cols:"12",lg:"8",md:"8"},{default:t(()=>[e(Be,U({placeholder:"p.ej. trofeo y premio en efectivo...",density:"compact",variant:"outlined",modelValue:a(m).prize.fieldValue,"onUpdate:modelValue":o[1]||(o[1]=f=>a(m).prize.fieldValue=f)},a(m).prize.fieldPropsValue),{"append-inner":t(()=>[e(c,{name:"futzo-icon:help-circle",class:"cursor-pointer"}),e(Q,{activator:"parent"},{default:t(()=>o[5]||(o[5]=[z(" Este premio será otorgado al finalizar el torneo. ")])),_:1,__:[5]})]),_:1},16,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(w,{cols:"12",lg:"4",md:"4"},{default:t(()=>o[6]||(o[6]=[C("span",{class:"text-body-1"}," Descripción ",-1)])),_:1,__:[6]}),e(w,{cols:"12",lg:"8",md:"8"},{default:t(()=>[e(De,U({modelValue:a(m).description.fieldValue,"onUpdate:modelValue":o[2]||(o[2]=f=>a(m).description.fieldValue=f)},a(m).description.fieldPropsValue,{placeholder:"Una breve descripción del torneo...",variant:"outlined",dense:"",rows:"2",class:"rounded-lg"}),null,16,["modelValue"])]),_:1})]),_:1})]),_:1})}}}),da=H({__name:"index",setup(n){const _=k(!1),{steps:l,isEdition:V,tournamentStoreRequest:u,dialog:r}=P(F()),m=k({validate:Function,handleSubmit:Function}),$=()=>{if(l.value.current==="basic-info"){r.value=!1;return}const c=["basic-info","details-info"],f=c.indexOf(l.value.current);l.value.current=c[f-1]},i=async()=>{if((await m.value.validate()).valid){const f=await s();p(f);const d=["basic-info","details-info"],S=d.indexOf(l.value.current);l.value.steps[S].completed||(l.value.steps[S].completed=!0),S===d.length-1?await R():l.value.current=d[S+1]}};async function R(){_.value=!0,V.value?await F().updateTournament():await F().storeTournament(),_.value=!1}async function s(){return await m.value.handleSubmit(f=>f)()}function p(c){l.value.current==="basic-info"&&(u.value={...u.value,basic:{...c}}),l.value.current==="details-info"&&(u.value={...u.value,details:{...c}})}const g=X(()=>l.value.current==="basic-info"?"Cancelar":"Regresar"),o=X(()=>{switch(l.value.current){case"basic-info":return"Siguiente";case"details-info":return"Crear torneo";default:return"Crear torneo"}});return(c,f)=>{const d=Ne,S=Le("PerfectScrollbar");return I(),B(S,{options:{suppressScrollX:!0}},{default:t(()=>[e(ze,null,{default:t(()=>[e(Y,{class:"pa-0"},{default:t(()=>[e(L,null,{default:t(()=>[e(w,null,{default:t(()=>[e(ta,{"form-steps":a(l)},null,8,["form-steps"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(w,null,{default:t(()=>[e(d,{group:"",offset:{enter:["-100%",0],leave:["100%",0]}},{default:t(()=>[a(l).current==="basic-info"?(I(),B(ia,{ref_key:"stepRef",ref:m,key:a(l).current})):re("",!0),a(l).current==="details-info"?(I(),B(ra,{ref_key:"stepRef",ref:m,key:a(l).current})):re("",!0)]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(w,{cols:"6"},{default:t(()=>[e(me,{variant:"outlined",block:"",color:"secondary",density:"comfortable",size:"large",onClick:$},{default:t(()=>[z(M(a(g)),1)]),_:1})]),_:1}),e(w,{cols:"6"},{default:t(()=>[e(me,{variant:"elevated",block:"",color:"primary",density:"comfortable",size:"large",loading:a(_),onClick:i},{default:t(()=>[z(M(a(o)),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Fa=H({__name:"index",setup(n){const{steps:_,dialog:l}=P(F()),V=()=>{F().$reset()};return(u,r)=>(I(),B(la,{modelValue:a(l),"onUpdate:modelValue":r[0]||(r[0]=m=>_e(l)?l.value=m:null),"max-width":"690",onAfterLeave:V,scrollable:""},{default:t(()=>[e(qe,{class:"create-tournament-card futzo-rounded",height:"100%",style:Ee({overflow:u.$vuetify.display.mobile?"":"hidden"})},{default:t(()=>[e(ua),e(da,{step:a(_).current},null,8,["step"])]),_:1},8,["style"])]),_:1},8,["modelValue"]))}});export{Fa as _};
